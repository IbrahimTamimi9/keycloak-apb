FROM ansibleplaybookbundle/apb-base

LABEL "com.redhat.apb.version"="0.1.0"
LABEL "com.redhat.apb.spec"=\
"dmVyc2lvbjogMS4wCm5hbWU6IGtleWNsb2FrLWFwYgppbWFnZTogZmVlZGhlbnJ5L2tleWNsb2Fr\
LWFwYgpkZXNjcmlwdGlvbjogS2V5Y2xvYWsgLSBPcGVuIFNvdXJjZSBJZGVudGl0eSBhbmQgQWNj\
ZXNzIE1hbmFnZW1lbnQKYmluZGFibGU6IFRydWUKYXN5bmM6IG9wdGlvbmFsCnRhZ3M6IAogIC0g\
bW9iaWxlLXNlcnZpY2UKbWV0YWRhdGE6CiAgZGlzcGxheU5hbWU6IEtleWNsb2FrCiAgY29uc29s\
ZS5vcGVuc2hpZnQuaW8vaWNvbkNsYXNzOiBmYSBmYS11c2VycwogIHNlcnZpY2VOYW1lOiBrZXlj\
bG9hawpwbGFuczoKICAtIG5hbWU6IGRlZmF1bHQKICAgIGRlc2NyaXB0aW9uOiBEZXBsb3kga2V5\
Y2xvYWsKICAgIGZyZWU6IFRydWUKICAgIG1ldGFkYXRhOiB7fQogICAgcGFyYW1ldGVyczogCiAg\
ICAtIG5hbWU6IEFETUlOX05BTUUKICAgICAgcmVxdWlyZWQ6IFRydWUKICAgICAgZGVmYXVsdDog\
YWRtaW4KICAgICAgdHlwZTogc3RyaW5nCiAgICAgIHRpdGxlOiBLZXljbG9hayBhZG1pbiB1c2Vy\
bmFtZQogICAgLSBuYW1lOiBBRE1JTl9QQVNTV09SRAogICAgICByZXF1aXJlZDogVHJ1ZQogICAg\
ICBkZWZhdWx0OiBhZG1pbgogICAgICB0eXBlOiBzdHJpbmcKICAgICAgdGl0bGU6IEtleWNsb2Fr\
IGFkbWluIHBhc3N3b3JkCiAgICBiaW5kX3BhcmFtZXRlcnM6CiAgICAtIG5hbWU6IHNlcnZpY2UK\
ICAgICAgdGl0bGU6IFRoZSBzZXJ2aWNlIHRoZSBjbGllbnQgaXMgZm9yCiAgICAgIHR5cGU6IHN0\
cmluZwo="

COPY playbooks /opt/apb/actions
COPY roles /opt/ansible/roles
RUN chmod -R g=u /opt/{ansible,apb}
USER apb
