FROM ansibleplaybookbundle/apb-base

LABEL "com.redhat.apb.version"="0.1.0"
LABEL "com.redhat.apb.spec"=\
"bmFtZToga2V5Y2xvYWstYXBiCmltYWdlOiBmZWVkaGVucnkva2V5Y2xvYWstYXBiCmRlc2NyaXB0\
aW9uOiBLZXljbG9hayAtIE9wZW4gU291cmNlIElkZW50aXR5IGFuZCBBY2Nlc3MgTWFuYWdlbWVu\
dApiaW5kYWJsZTogVHJ1ZQphc3luYzogb3B0aW9uYWwKdGFnczogCiAgLSBtb2JpbGUtc2Vydmlj\
ZQptZXRhZGF0YToKICBkaXNwbGF5TmFtZTogS2V5Y2xvYWsKICBjb25zb2xlLm9wZW5zaGlmdC5p\
by9pY29uQ2xhc3M6IGZhIGZhLXVzZXJzCnBsYW5zOgogIC0gbmFtZTogZGVmYXVsdAogICAgZGVz\
Y3JpcHRpb246IERlcGxveSBrZXljbG9hawogICAgZnJlZTogVHJ1ZQogICAgbWV0YWRhdGE6IHt9\
CiAgICBwYXJhbWV0ZXJzOiAKICAgIC0gbmFtZTogQURNSU5fTkFNRQogICAgICByZXF1aXJlZDog\
VHJ1ZQogICAgICBkZWZhdWx0OiBhZG1pbgogICAgICB0eXBlOiBzdHJpbmcKICAgICAgdGl0bGU6\
IEtleWNsb2FrIGFkbWluIHVzZXJuYW1lCiAgICAtIG5hbWU6IEFETUlOX1BBU1NXT1JECiAgICAg\
IHJlcXVpcmVkOiBUcnVlCiAgICAgIGRlZmF1bHQ6IGFkbWluCiAgICAgIHR5cGU6IHN0cmluZwog\
ICAgICB0aXRsZTogS2V5Y2xvYWsgYWRtaW4gcGFzc3dvcmQKICAgIGJpbmRfcGFyYW1ldGVyczoK\
ICAgIC0gbmFtZTogc2VydmljZQogICAgICB0aXRsZTogU2VydmljZSBjbGllbnQgaXMgZm9yCiAg\
ICAgIHR5cGU6IHN0cmluZw=="

COPY playbooks /opt/apb/actions
COPY roles /opt/ansible/roles
RUN chmod -R g=u /opt/{ansible,apb}
USER apb
