FROM ansibleplaybookbundle/apb-base

LABEL "com.redhat.apb.version"="0.1.0"
LABEL "com.redhat.apb.spec"=\
"bmFtZToga2V5Y2xvYWstYXBiCmltYWdlOiBmZWVkaGVucnkva2V5Y2xvYWstYXBiCmRlc2NyaXB0\
aW9uOiBLZXljbG9hayAtIHNlY3VyZSBrZXkvdmFsdWUgc3RvcmUKYmluZGFibGU6IFRydWUKYXN5\
bmM6IG9wdGlvbmFsCnRhZ3M6IAogIC0gbW9iaWxlLXNlcnZpY2UKbWV0YWRhdGE6CiAgZGlzcGxh\
eU5hbWU6IEtleWNsb2FrCiAgY29uc29sZS5vcGVuc2hpZnQuaW8vaWNvbkNsYXNzOiBmYSBmYS11\
c2VycwpwbGFuczoKICAtIG5hbWU6IGRlZmF1bHQKICAgIGRlc2NyaXB0aW9uOiBEZXBsb3kga2V5\
Y2xvYWsKICAgIGZyZWU6IFRydWUKICAgIG1ldGFkYXRhOiB7fQogICAgcGFyYW1ldGVyczogCiAg\
ICAtIG5hbWU6IEFETUlOX05BTUUKICAgICAgcmVxdWlyZWQ6IFRydWUKICAgICAgZGVmYXVsdDog\
YWRtaW4KICAgICAgdHlwZTogc3RyaW5nCiAgICAgIHRpdGxlOiBLZXljbG9hayBhZG1pbiB1c2Vy\
bmFtZQogICAgLSBuYW1lOiBBRE1JTl9QQVNTV09SRAogICAgICByZXF1aXJlZDogVHJ1ZQogICAg\
ICBkZWZhdWx0OiBhZG1pbgogICAgICB0eXBlOiBzdHJpbmcKICAgICAgdGl0bGU6IEtleWNsb2Fr\
IGFkbWluIHBhc3N3b3JkCiAgICBiaW5kX3BhcmFtZXRlcnM6CiAgICAtIG5hbWU6IHNlcnZpY2UK\
ICAgICAgdGl0bGU6IFNlcnZpY2UgY2xpZW50IGlzIGZvcgogICAgICB0eXBlOiBzdHJpbmc="

COPY playbooks /opt/apb/actions
COPY roles /opt/ansible/roles
RUN chmod -R g=u /opt/{ansible,apb}
USER apb
